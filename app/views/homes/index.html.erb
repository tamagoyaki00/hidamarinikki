<div class="flex flex-col items-center justify-center p-4">
  <div class="max-w-md mx-auto my-8">
    <%= link_to new_diary_path, class: "card card-body bg-secondary shadow-xl rounded-lg p-6 text-center" do %>
      <h2 class="text-xl font-bold mb-2">日記を書く</h2>
      <p class="text-base text-gray-700">今日あった良かったことや、<br>
        ちょっと頑張ったことなどを書いてみよう！</p>
    <% end %>
  </div>
<div class="flex flex-col items-center justify-center p-4">
  <h1 class="text-3xl font-bold text-gray-800 my-8">幸せ瓶</h1>

  <!-- コントローラーのスコープを拡張 -->
  <div data-controller="happiness-jar"
       data-happiness-jar-image-urls-value='<%= [
         asset_path("green.png"), 
         asset_path("star.png"), 
         asset_path("heart.png")
       ].to_json.html_safe %>'>

    <div class="w-full flex justify-center">
      <div id="bottle-container"
           class="relative w-[300px] h-[450px] border-2 border-gray-700 rounded-[20px/10px] bg-white bg-opacity-70 shadow-lg overflow-hidden">

        <canvas id="bottleCanvas" style="position: absolute; top: 0; left: 0;"></canvas>

        <div id="fullMessage"
             class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black bg-opacity-70 text-white p-5 rounded-lg text-2xl text-center hidden z-50">
          瓶がいっぱいになりました！
        </div>
      </div>
    </div>

    <!-- ボタンをコントローラーのスコープ内に移動 -->
    <div class="w-full flex justify-center">
      <button data-action="click->happiness-jar#addMarble"
              class="mt-10 px-8 py-4 text-xl bg-green-600 text-white rounded-full cursor-pointer transition-colors duration-300 shadow-md hover:bg-green-700">
        幸せを追加
      </button>
    </div>

  </div>
</div>











