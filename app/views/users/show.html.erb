<div class="flex flex-col items-center max-w-5xl mx-auto px-4 mt-8">
  <h2 class="font-mplus text-2xl font-bold mb-6">プロフィール</h2>

  <!-- アバター -->
  <div class="flex flex-col items-center w-full space-y-6">
    <% if @user.avatar.attached? %>
      <%= image_tag @user.avatar_thumbnail, class: "rounded-full w-24 h-24 mt-1" %>
    <% else %>
      <%= avatar_placeholder(@user) %>
    <% end %>
  </div>

  <div class= "text-center mt-4">
    <% if @user.happiness_level.to_i > 0 %>
      <span class="ml-2 text-base text-primary font-semibold">
        幸せコレクター Lv<%= @user.happiness_level %>
      </span>
    <% end %>
  </div>

  <!-- ユーザー名 -->
  <div class="w-full mt-8">
    <h3 class="font-medium mb-2">ユーザー名</h3>
    <p class="input input-bordered w-full bg-base-200 flex items-center h-12"><%= @user.name %></p>
  </div>


  <!-- 自己紹介 -->
  <% if @user.introduction.present? %>
    <div class="w-full mt-8">
      <h3 class="font-medium mb-2">自己紹介</h3>
      <!-- `p`タグにも textarea クラスを適用 -->
      <p class="textarea textarea-bordered textarea-profile w-full bg-base-200 h-auto"><%= @user.introduction %></p>
    </div>
  <% end %>

    <div class="w-full mt-8 flex justify-center">
    <% if current_user == @user %>
        <%= link_to "編集", edit_user_registration_path, class: "btn btn-primary px-10" %>
    <% end %>
    </div>

    <div class="divider mt-16"></div>


    <!-- バッジ一覧 -->
    <div class="w-full mt-8">
      <h3 class="font-medium mb-4">バッジ一覧</h3>
      <div class="grid grid-cols-3 gap-6 justify-items-center">
        <% badges = [
          { level: 1, image: "level1.svg" },
          { level: 5, image: "level5.svg" },
          { level: 15, image: "level15.png" }
        ] %>

        <% badges.each do |badge| %>
          <div class="flex flex-col items-center">
            <% if @user.happiness_level >= badge[:level] %>
              <%= image_tag badge[:image], class: "w-24 h-24 level-#{badge[:level]}" %>
              <span class="mt-2 text-sm">Lv<%= badge[:level] %></span>
            <% else %>
              <%= image_tag badge[:image], class: "w-24 h-24 opacity-30 level-#{badge[:level]}" %>
              <span class="mt-2 text-sm text-gray-400">Lv<%= badge[:level] %></span>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="divider mt-16"></div>

    <div class="mt-4 space-y-4">
      <div class="flex justify-center">
        <%= link_to 'アカウントを削除', user_registration_path,
            data: { turbo_method: :delete, turbo_confirm: '本当にアカウントを削除しますか？' },
            class: "btn btn-error w-40" %>
      </div>

      <div class="flex items-start gap-2 text-error max-w-lg mx-auto">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 
                  1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 
                  0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
        <p class="text-sm">
          アカウントを削除すると、すべてのデータが完全に削除され、復元することはできません。
        </p>
      </div>
    </div>

</div>
